{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///E:/GuestLinked/guestlinked/app/websites/page.jsx"],"sourcesContent":["'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport Link from 'next/link';\r\n\r\nconst supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n);\r\n\r\nexport default function WebsitesPage() {\r\n  const [websites, setWebsites] = useState([]);\r\n  const [filtered, setFiltered] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    category: '',\r\n    minDA: '',\r\n    maxPrice: ''\r\n  });\r\n\r\n  const clearFilters = () => {\r\n    setFilters({\r\n      search: '',\r\n      category: '',\r\n      minDA: '',\r\n      maxPrice: ''\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchWebsites = async () => {\r\n      try {\r\n        // First, get the total count\r\n        const { count } = await supabase\r\n          .from('web_sites')\r\n          .select('*', { count: 'exact', head: true });\r\n\r\n        console.log(`Total records in database: ${count}`);\r\n\r\n        // Fetch all records using pagination if more than 1000\r\n        let allData = [];\r\n        const pageSize = 1000;\r\n        let currentPage = 0;\r\n\r\n        while (currentPage * pageSize < count) {\r\n          const { data, error } = await supabase\r\n            .from('web_sites')\r\n            .select('*')\r\n            .range(currentPage * pageSize, (currentPage + 1) * pageSize - 1);\r\n\r\n          if (error) {\r\n            console.error('Error fetching page:', error);\r\n            break;\r\n          }\r\n\r\n          allData = [...allData, ...data];\r\n          currentPage++;\r\n          console.log(`Fetched page ${currentPage}, total records so far: ${allData.length}`);\r\n        }\r\n\r\n        console.log(`Final total fetched: ${allData.length} websites from database`);\r\n        \r\n        setWebsites(allData);\r\n        setFiltered(allData);\r\n        \r\n        // Extract unique categories from category column\r\n        const allCategories = [];\r\n        allData.forEach(site => {\r\n          if (site.category && !allCategories.includes(site.category)) {\r\n            allCategories.push(site.category);\r\n          }\r\n        });\r\n        setCategories(allCategories.sort());\r\n      } catch (error) {\r\n        console.error('Error in fetchWebsites:', error);\r\n      }\r\n    };\r\n    \r\n    fetchWebsites();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const { search, category, minDA, maxPrice } = filters;\r\n    const results = websites.filter((site) => {\r\n      const matchSearch =\r\n        site.link?.toLowerCase().includes(search.toLowerCase()) ||\r\n        site.category?.toLowerCase().includes(search.toLowerCase());\r\n      const matchCategory =\r\n        !category ||\r\n        site.category?.toLowerCase().includes(category.toLowerCase());\r\n      const matchDA = !minDA || (site.moz_da || 0) >= parseInt(minDA);\r\n      const matchPrice = !maxPrice || (site.price_to || 0) <= parseInt(maxPrice);\r\n\r\n      return matchSearch && matchCategory && matchDA && matchPrice;\r\n    });\r\n    setFiltered(results);\r\n  }, [filters, websites]);\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 py-6\">\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">Guest Posting Websites</h1>\r\n          <p className=\"text-gray-600\">Discover high-quality websites for your guest posting campaigns</p>\r\n        </div>\r\n        <Link \r\n          href=\"/\"\r\n          className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300\"\r\n        >\r\n          ‚Üê Back to Home\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\">\r\n        <input\r\n          className=\"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none\"\r\n          type=\"text\"\r\n          placeholder=\"Search by link or niche\"\r\n          value={filters.search}\r\n          onChange={(e) => setFilters({ ...filters, search: e.target.value })}\r\n        />\r\n        <select\r\n          className=\"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white\"\r\n          value={filters.category}\r\n          onChange={(e) => setFilters({ ...filters, category: e.target.value })}\r\n        >\r\n          <option value=\"\">All Categories</option>\r\n          {categories.map((category) => (\r\n            <option key={category} value={category}>\r\n              {category}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <input\r\n          className=\"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none\"\r\n          type=\"number\"\r\n          placeholder=\"Min DA\"\r\n          value={filters.minDA}\r\n          onChange={(e) => setFilters({ ...filters, minDA: e.target.value })}\r\n        />\r\n        <input\r\n          className=\"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none\"\r\n          type=\"number\"\r\n          placeholder=\"Max Price\"\r\n          value={filters.maxPrice}\r\n          onChange={(e) => setFilters({ ...filters, maxPrice: e.target.value })}\r\n        />\r\n        </div>\r\n        \r\n        {/* Clear Filters Button */}\r\n        <div className=\"flex justify-end\">\r\n          <button\r\n            onClick={clearFilters}\r\n            className=\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-all duration-300 flex items-center gap-2\"\r\n          >\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n            Clear Filters\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Results count */}\r\n      <div className=\"mb-4\">\r\n        <p className=\"text-gray-600\">\r\n          Showing {filtered.length} of {websites.length} websites\r\n        </p>\r\n      </div>\r\n\r\n      {/* Data Table */}\r\n      <div className=\"overflow-x-auto rounded-lg border border-gray-200 shadow-sm\">\r\n        <table className=\"min-w-full text-sm border-collapse\">\r\n          <thead className=\"bg-gray-50\">\r\n            <tr>\r\n              <th className=\"px-6 py-4 text-left font-semibold text-gray-700 border-b\">Link</th>\r\n              <th className=\"px-6 py-4 text-left font-semibold text-gray-700 border-b\">Categories</th>\r\n              <th className=\"px-6 py-4 text-left font-semibold text-gray-700 border-b\">Price</th>\r\n              <th className=\"px-6 py-4 text-left font-semibold text-gray-700 border-b\">Traffic</th>\r\n              <th className=\"px-6 py-4 text-left font-semibold text-gray-700 border-b\">DA / AS / DR</th>\r\n              <th className=\"px-6 py-4 text-left font-semibold text-gray-700 border-b\">TAT</th>\r\n              <th className=\"px-6 py-4 text-left font-semibold text-gray-700 border-b\">Link Type</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filtered.map((site) => (\r\n              <tr key={site.id} className=\"border-b border-gray-100 hover:bg-gray-50 transition-colors\">\r\n                <td className=\"px-6 py-4\">\r\n                  <a \r\n                    href={site.link} \r\n                    target=\"_blank\" \r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"text-blue-600 hover:text-blue-800 underline font-medium\"\r\n                  >\r\n                    {site.link}\r\n                  </a>\r\n                </td>\r\n                <td className=\"px-6 py-4\">\r\n                  {site.category && (\r\n                    <span className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-xs font-medium\">\r\n                      {site.category}\r\n                    </span>\r\n                  )}\r\n                </td>\r\n                <td className=\"px-6 py-4\">\r\n                  <span className=\"font-medium text-green-600\">\r\n                    ${site.price_from} - ${site.price_to}\r\n                  </span>\r\n                </td>\r\n                <td className=\"px-6 py-4\">{site.similarweb_traffic}</td>\r\n                <td className=\"px-6 py-4\">\r\n                  <div className=\"text-sm\">\r\n                    <div>DA: <span className=\"font-medium\">{site.moz_da}</span></div>\r\n                    <div>AS: <span className=\"font-medium\">{site.semrush_as}</span></div>\r\n                    <div>DR: <span className=\"font-medium\">{site.ahrefs_dr_range}</span></div>\r\n                  </div>\r\n                </td>\r\n                <td className=\"px-6 py-4\">{site.tat}</td>\r\n                <td className=\"px-6 py-4\">\r\n                  <span className=\"bg-gray-100 text-gray-800 px-2 py-1 rounded-md text-xs font-medium\">\r\n                    {site.link_attribution_type}\r\n                  </span>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n        {filtered.length === 0 && (\r\n          <div className=\"p-8 text-center\">\r\n            <div className=\"text-gray-400 mb-2\">\r\n              <svg className=\"w-12 h-12 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.034 0-3.9.785-5.291 2.291M6.343 6.343A8 8 0 1017.657 17.657 8 8 0 006.343 6.343z\" />\r\n              </svg>\r\n            </div>\r\n            <p className=\"text-gray-500 text-lg\">No results match your filters.</p>\r\n            <p className=\"text-gray-400 text-sm mt-1\">Try adjusting your search criteria</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}